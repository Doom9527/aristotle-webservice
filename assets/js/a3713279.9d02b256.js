"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[588],{3876:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"deployment","title":"\u90e8\u7f72","description":"[//]: # (Copyright 2024 Paion Data)","source":"@site/docs/deployment.md","sourceDirName":".","slug":"/deployment","permalink":"/aristotle-webservice/docs/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/deployment.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"\u90e8\u7f72"},"sidebar":"tutorialSidebar","previous":{"title":"\u914d\u7f6e","permalink":"/aristotle-webservice/docs/configuration"},"next":{"title":"\u8fc7\u6ee4","permalink":"/aristotle-webservice/docs/filtering"}}');var a=t(4848),i=t(8453);const o={sidebar_position:3,title:"\u90e8\u7f72"},s=void 0,l={},c=[{value:"\u751f\u4ea7\u90e8\u7f72\u51c6\u5907",id:"\u751f\u4ea7\u90e8\u7f72\u51c6\u5907",level:2},{value:"\u5b89\u88c5 JDK 17",id:"\u5b89\u88c5-jdk-17",level:3},{value:"\u5b89\u88c5 Maven",id:"\u5b89\u88c5-maven",level:3},{value:"\u6253\u5305 Aristotle",id:"\u6253\u5305-aristotle",level:2},{value:"\u542f\u52a8 Aristotle",id:"\u542f\u52a8-aristotle",level:2},{value:"\u83b7\u53d6 OpenAPI \u6587\u6863",id:"\u83b7\u53d6-openapi-\u6587\u6863",level:3},{value:"\u6545\u969c\u6392\u67e5",id:"\u6545\u969c\u6392\u67e5",level:2},{value:"\u542f\u52a8 Aristotle \u62a5 &quot;Failed to execute CommandLineRunner&quot; \u9519\u8bef",id:"\u542f\u52a8-aristotle-\u62a5-failed-to-execute-commandlinerunner-\u9519\u8bef",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72 ",(0,a.jsx)(n.a,{href:"https://aristotle-ws.com",children:"Aristotle"}),"\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u751f\u4ea7\u90e8\u7f72\u51c6\u5907",children:"\u751f\u4ea7\u90e8\u7f72\u51c6\u5907"}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"\u5047\u8bbe\u4f60\u4f7f\u7528\u7684\u662f Ubuntu 22.04+ \u670d\u52a1\u5668\u8fdb\u884c\u90e8\u7f72\u3002"})}),"\n",(0,a.jsx)(n.h3,{id:"\u5b89\u88c5-jdk-17",children:"\u5b89\u88c5 JDK 17"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install openjdk-17-jdk\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679c\u4f60\u5728\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u540e\u770b\u5230\u7c7b\u4f3c\u8f93\u51fa\uff0c\u8bf4\u660e\u5b89\u88c5\u6210\u529f\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'$ java -version\nopenjdk version "17.0.11" 2024-04-16\nOpenJDK Runtime Environment (build 17.0.11+9-Ubuntu-120.04.2)\nOpenJDK 64-Bit Server VM (build 17.0.11+9-Ubuntu-120.04.2, mixed mode, sharing)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u5b89\u88c5-maven",children:"\u5b89\u88c5 Maven"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt install maven\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679c\u4f60\u5728\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u540e\u770b\u5230\u7c7b\u4f3c\u8f93\u51fa\uff0c\u8bf4\u660e\u5b89\u88c5\u6210\u529f\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'$ mvn -version\nApache Maven 3.6.3\nMaven home: /usr/share/maven\nJava version: 17.0.11, vendor: Ubuntu, runtime: /usr/lib/jvm/java-17-openjdk-amd64\nDefault locale: en_US, platform encoding: UTF-8\nOS name: "linux", version: "5.4.0-182-generic", arch: "amd64", family: "unix"\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0cMaven \u5df2\u7ecf\u4f7f\u7528\u4e86\u6b63\u786e\u7684 JDK\uff0c\u56e0\u6b64\u65e0\u9700\u989d\u5916\u8bbe\u7f6e JAVA_HOME\u3002\u4f46\u5982\u679c\u4f60\u5e0c\u671b\u663e\u5f0f\u6307\u5b9a JAVA_HOME\uff0c\u6216\u5728\u6709\u591a\u4e2a JDK \u5b89\u88c5\u65f6\u786e\u4fdd Maven \u59cb\u7ec8\u4f7f\u7528 JDK 17\uff0c\u53ef\u4ee5\u5728 shell \u914d\u7f6e\u6587\u4ef6\uff08\u5982 .bashrc\u3001.zshrc \u6216 .profile\uff09\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6253\u5305-aristotle",children:"\u6253\u5305 Aristotle"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/paion-data/aristotle.git\ncd aristotle\n\nexport NEO4J_URI=YOUR_NEO4J_URI\nexport NEO4J_USERNAME=YOUR_NEO4J_USERNAME\nexport NEO4J_PASSWORD=YOUR_NEO4J_PASSWORD\nexport NEO4J_DATABASE=YOUR_NEO4J_DATABASE\n\nmvn clean package -Dmaven.test.skip=true\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://aristotle-ws.com",children:"Aristotle"})," \u57fa\u4e8e ",(0,a.jsx)(n.a,{href:"https://spring.io/projects/spring-boot",children:"Springboot"})," \u6784\u5efa\uff0c\u5185\u7f6e Web \u5bb9\u5668\uff0c\u4f7f\u7528 Maven \u6253\u5305\u4e3a jar \u6587\u4ef6\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u542f\u52a8-aristotle",children:"\u542f\u52a8 Aristotle"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"java -jar target/Aristotle-1.0-SNAPSHOT.jar\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Web \u670d\u52a1\u5c06\u8fd0\u884c\u5728 ",(0,a.jsx)(n.strong,{children:"8080"})," \u7aef\u53e3\u3002"]}),"\n",(0,a.jsx)(n.h3,{id:"\u83b7\u53d6-openapi-\u6587\u6863",children:"\u83b7\u53d6 OpenAPI \u6587\u6863"}),"\n",(0,a.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"http://localhost:8080/doc.html",children:"http://localhost:8080/doc.html"})})," \u8bbf\u95ee OpenAPI \u6587\u6863\u3002\u8be5\u6587\u6863\u57fa\u4e8e ",(0,a.jsx)(n.strong,{children:"Swagger 2"})," \u5e76\u7531 ",(0,a.jsx)(n.strong,{children:"Knife4J"})," \u589e\u5f3a\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"}),"\n",(0,a.jsx)(n.h3,{id:"\u542f\u52a8-aristotle-\u62a5-failed-to-execute-commandlinerunner-\u9519\u8bef",children:'\u542f\u52a8 Aristotle \u62a5 "Failed to execute CommandLineRunner" \u9519\u8bef'}),"\n",(0,a.jsxs)(n.p,{children:["\u5bf9\u4e8e Neo4J \u6570\u636e\u5e93\uff0cAristotle \u4f1a\u5728\u9996\u6b21\u8fde\u63a5\u6570\u636e\u5e93\u65f6\u81ea\u52a8\n",(0,a.jsx)(n.a,{href:"https://github.com/paion-data/aristotle/blob/master/src/main/java/com/paiondata/aristotle/config/ConstraintInitializer.java",children:"\u521b\u5efa\u82e5\u5e72\u6570\u636e\u5e93\u7ea6\u675f"}),"\u3002\u5982\u679c ",(0,a.jsx)(n.a,{href:"#starting-aristotle",children:"\u542f\u52a8"})," \u65f6\u51fa\u73b0\u5982\u4e0b\u62a5\u9519\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"java.lang.IllegalStateException: Failed to execute CommandLineRunner\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:774) ~[spring-boot-2.7.3.jar!/:2.7.3]\n\tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:755) ~[spring-boot-2.7.3.jar!/:2.7.3]\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.7.3.jar!/:2.7.3]\n\t...\nCaused by: org.neo4j.driver.exceptions.DatabaseException: Unable to create Constraint( name='constraint_1c8dc611', type='UNIQUENESS', schema=(:User {oidcid}) ):\nBoth Node(516397) and Node(517024) have the label `User` and property `oidcid` = 'user42fd5D645'. Note that only the first found violation is shown.\n\tat org.neo4j.driver.internal.util.Futures.blockingGet(Futures.java:111) ~[neo4j-java-driver-4.4.9.jar!/:4.4.9-e855bcc800deff6ddcf064c822314bb5c8d08c53]\n\tat org.neo4j.driver.internal.InternalTransaction.run(InternalTransaction.java:58) ~[neo4j-java-driver-4.4.9.jar!/:4.4.9-e855bcc800deff6ddcf064c822314bb5c8d08c53]\n\tat org.neo4j.driver.internal.AbstractQueryRunner.run(AbstractQueryRunner.java:34) ~[neo4j-java-driver-4.4.9.jar!/:4.4.9-e855bcc800deff6ddcf064c822314bb5c8d08c53]\n\t...\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5f88\u53ef\u80fd\u662f Neo4J \u6570\u636e\u5e93\u4e2d\u5df2\u5b58\u5728\u90e8\u5206\u6570\u636e\uff0c\u5bfc\u81f4\u7ea6\u675f\u65e0\u6cd5\u521b\u5efa\u3002\u5efa\u8bae\u6e05\u7a7a\u6570\u636e\u5e93\u540e\u91cd\u65b0\u542f\u52a8 Aristotle\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var r=t(6540);const a={},i=r.createContext(a);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);